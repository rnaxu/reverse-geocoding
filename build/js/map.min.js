!function(){var a=function(a){this.gmap=new google.maps.Map(document.getElementById("map"),{center:{lat:a.lat,lng:a.lng},zoom:a.zoom}),this.infowindows=[]};a.prototype.mapEvent=function(){var a,b=this;this.gmap.addListener("center_changed",function(){clearTimeout(a),a=setTimeout(function(){var a=b.getCenteLatLng();b.getAddress(a)},1e3)}),this.gmap.addListener("click",function(){for(var a=0;a<b.infowindows.length;a++)b.infowindows[a].close()})},a.prototype.getCenteLatLng=function(){var a=this.gmap.getCenter();return{lat:a.lat(),lng:a.lng()}},a.prototype.getAddress=function(a){var b=this,c=new google.maps.Geocoder,d={lat:a.lat,lng:a.lng};c.geocode({location:d},function(a,c){if(c===google.maps.GeocoderStatus.OK){for(var e="",f=a.length,g=0;f>g;g++)a[g].types[0].match(/^sublocality_level_/)&&(e=b.formatAddress(a[g].formatted_address),g=f);""===e&&(a[0].types[0].match(/premise/)?e=b.formatAddress(a[0].formatted_address):window.alert("No results found")),b.showInfoWindow(e,d)}else window.alert("Geocoder failed due to: "+c)})},a.prototype.formatAddress=function(a){var b="";return a.match(/^日本/)?b=a.replace("日本, ","").replace(/〒[0-9]{3}-[0-9]{4} /,""):window.alert("No results found"),b},a.prototype.showInfoWindow=function(a,b){this.infowindow=new google.maps.InfoWindow({content:a,position:b}),this.infowindows.push(this.infowindow),this.infowindow.open(this.gmap)};var b={lat:35.681382,lng:139.766084,zoom:15},c=new a(b);c.getAddress(b),c.mapEvent()}();